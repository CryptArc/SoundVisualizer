var SOUNDCLOUD_API_KEY="802c2f1c80c96881ff265799929e8a2c",dom=function(){"use strict";function e(t,i){r(!n(t),"You should input the string"),t.indexOf("%c")>-1?(i=i||e.styles,console.log(t,i)):console.log(t)}function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(e){return"string"===t(e)}function i(e){return!!e&&1===e.nodeType}function o(e){return 9===e.nodeType}function r(e,t){if(e)throw new Error(t)}function a(e,t){return r(!n(e),"arguments must be string type"),t=(n(t)?c(t):t)||document,r(!i(t)&&!o(t),"Second Element must be element node"),t.querySelectorAll(e)}function c(e,t){return a(e,t)[0]}function u(e){9===e.className.indexOf("ctrgroup--hidden")?e.className=e.className.split(" ")[0]:e.className=e.className+" ctrgroup--hidden"}function s(e){e=(n(e)?c(e):e)||document,e.style.display="block"}function l(e){e=(n(e)?c(e):e)||document,e.style.display="none"}var q="1.0.0",d="sona";return e.styles="color: #fe4940; font-size: 1.2rem;",{info:{version:q,author:d},util:{cLog:e,onoffmenu:u},query:c,show:s,hide:l}}(),sona=function(){"use strict";function e(){s.clearRect(0,0,u.width,u.height),s.beginPath(),s.rect(0,0,u.width,u.height);var e=Math.floor(2*Math.random()),t=s.createLinearGradient(0,0,1500,0);t.addColorStop(0,y[e][0]),t.addColorStop(1,y[e][1]),s.fillStyle=t,s.fill()}function t(){a&&(a.width=window.innerWidth,a.height=window.innerHeight,u.width=window.innerWidth,u.height=window.innerHeight,e())}function n(){var e,t,i=0,o=q.frequencyBinCount,r=new Uint8Array(o),u=a.width/o*2.5;q.getByteFrequencyData(r),c.clearRect(-a.width,-a.height,2*a.width,2*a.height);for(var s=0,l=o;s<l;s++)t=r[s],e=3*t,c.fillStyle="rgba("+(t+200)+", "+(t+200)+","+(t+200)+", 0.4)",c.fillRect(i,a.height-e/2+100,u,e/100),c.fillRect(i,a.height-e/2,u,e/2),c.beginPath(),c.arc(i,a.height-e/2-90,u/3,0,2*Math.PI,!1),c.fill(),i+=u+1;requestAnimationFrame(n)}function i(e){l.setAttribute("src",e)}function o(){clearInterval(e)}function r(i){q=i.analyser,d=i.canvas,a=document.createElement("canvas"),a.setAttribute("style","position: absolute; z-index: 10"),c=a.getContext("2d"),d.appendChild(a),l=document.createElement("img"),l.setAttribute("style","position: absolute; z-index: 20; top: 10px; right: 10px; opacity: 0.5"),d.appendChild(l),u=document.createElement("canvas"),s=u.getContext("2d"),d.appendChild(u),t(),n(),setInterval(e,500),window.addEventListener("resize",t,!1)}var a,c,u,s,l,q,d,f="1.0.0",h="sona",y={0:["#32e2e4","#fc4cff"],1:["#00DBDE","#FC00FF"]};return{info:{version:f,author:h},init:r,drawAlbumImg:i,clearBackEffect:o}}(),sound=function(e){"use strict";function t(i){return this instanceof t?void this._init.apply(this,arguments):(e.initialize({client_id:n}),new t(i))}var n=SOUNDCLOUD_API_KEY;return t.fn=t.prototype={constructor:t,author:"sona",version:"1.0.0",_init:function(e){var t=new(window.AudioContext||window.webkitAudioContext),n=t.createMediaElementSource(e);this.isPlay=!1,this.audio=e,this.analyser=t.createAnalyser(),this.analyser.fftSize=256,this.analyser.connect(t.destination),this.audio.crossOrigin="anonymous",n.connect(this.analyser)},search:function(t,i,o){e.resolve(t).then(function(e){var t=e.stream_url+"?client_id="+n,o=e.artwork_url;i.call(this,t,o)}).catch(function(e){o(e)})},play:function(e){this.audio.src="data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",this.audio.setAttribute("src",e),this.audio.play(),this.isPlay=!0}},t}(SC);!function(e,t,n){"use strict";function i(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function o(t){y.search(t,function(t,i){e.show(l),y.play(t),n.drawAlbumImg(i),setTimeout(h.onoffmenu(d),3e3)},function(e){h.cLog(e)})}var r=!!document.documentMode;r&&(e.query(".layer").style.display="table");var a="track",c=e.query(".ctrgroup__player__form"),u=e.query(".ctrgroup__togglebtn"),s=e.query(".ctrgroup__player__form__input"),l=e.query(".visualPanel"),q=e.query(".defaultPanel"),d=e.query(".ctrgroup"),f=e.query(".ctrgroup__player__audio"),h=e.util,y=t(f);if(n.init({analyser:y.analyser,canvas:l}),h.onoffmenu(d),e.hide(l),i(a)){var p=i(a);s.value=p,o(p)}c.addEventListener("submit",function(t){t.preventDefault(),e.hide(q),window.location.href=window.location.origin+"?track="+s.value,console.log(window.location.href),o(s.value)}),u.addEventListener("click",function(e){e.preventDefault(),h.onoffmenu(d)}),f.addEventListener("ended",function(){e.show(l),n.clearBackEffect()}),window.addEventListener("keydown",function(e){32===e.which&&(f.paused?f.play():f.pause())})}(dom,sound,sona);