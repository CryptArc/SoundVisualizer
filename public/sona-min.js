var dom=function(){"use strict";function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(n){return"string"===e(n)}function t(e){return!!e&&1===e.nodeType}function r(e){return 9===e.nodeType}function i(e,n){if(e)throw new Error(n)}function a(e,a){return i(!n(e),"arguments must be string type"),a=(n(a)?o(a):a)||document,i(!t(a)&&!r(a),"Second Element must be element node"),a.querySelectorAll(e)}function o(e,n){return a(e,n)[0]}function u(e,t){return i(!n(t),"arguments must be string type"),-1!==e.className.split(" ").indexOf(t)}function s(e,t){i(!n(t),"arguments must be string type"),u(e,t)||(e.className=e.className+" "+t)}function c(e,n){u(e,n)?e.className=e.className.split(" ")[0]:s(e,n)}function l(e){e=(n(e)?o(e):e)||document,e.style.display="block"}function d(e){e=(n(e)?o(e):e)||document,e.style.display="none"}function f(e){return/https:\/\/soundcloud.com\/[0-9a-z-]+\/[0-9a-z-]+/.test(e)}return{info:{author:"sona",version:"1.0.0"},util:{toggle:c,isCorrectSoundCloudURL:f},query:o,show:l,hide:d}}(),sona=function(){"use strict";function e(){c.clearRect(0,0,s.width,s.height),c.beginPath(),c.rect(0,0,s.width,s.height);var e=Math.floor(2*Math.random()),n=c.createLinearGradient(0,0,1500,0);n.addColorStop(0,g[e][0]),n.addColorStop(1,g[e][1]),c.fillStyle=n,c.fill()}function n(){o&&(o.width=window.innerWidth,o.height=window.innerHeight,s.width=window.innerWidth,s.height=window.innerHeight,e())}function t(){var e,n,r=0,i=d.frequencyBinCount,a=new Uint8Array(i),s=o.width/i*2.5;d.getByteFrequencyData(a),u.clearRect(-o.width,-o.height,2*o.width,2*o.height);for(var c=0,l=i;c<l;c++)n=a[c],e=3*n,u.fillStyle="rgba("+(n+200)+", "+(n+200)+","+(n+200)+", 0.4)",u.fillRect(r,o.height-e/2+100,s,e/100),u.fillRect(r,o.height-e/2,s,e/2),u.beginPath(),u.arc(r,o.height-e/2-90,s/3,0,2*Math.PI,!1),u.fill(),r+=s+1;requestAnimationFrame(t)}function r(e){l.setAttribute("src",e)}function i(){clearInterval(h)}function a(r){d=r.analyser,f=r.canvas,o=document.createElement("canvas"),o.className="fgCanvas",u=o.getContext("2d"),f.appendChild(o),l=document.createElement("img"),l.className="imgCanvas",f.appendChild(l),s=document.createElement("canvas"),c=s.getContext("2d"),f.appendChild(s),n(),t(),h=setInterval(e,500),window.addEventListener("resize",n,!1)}var o,u,s,c,l,d,f,h,g={0:["#00c9de","#fc19ff"],1:["#00DBDE","#FC00FF"]};return{info:{version:"1.0.0",author:"sona"},init:a,drawAlbumImg:r,clearBackEffect:i}}(),sound=function(e){"use strict";function n(r){if(!(this instanceof n))return e.initialize({client_id:t}),new n(r);this._init.apply(this,arguments)}var t="802c2f1c80c96881ff265799929e8a2c";return console.log("soud"),n.fn=n.prototype={constructor:n,author:"sona",version:"1.0.0",_init:function(e){var n=new(window.AudioContext||window.webkitAudioContext),t=n.createMediaElementSource(e);this.audio=e,this.analyser=n.createAnalyser(),this.analyser.fftSize=256,this.analyser.connect(n.destination),this.audio.crossOrigin="anonymous",t.connect(this.analyser)},search:function(n,r,i){var a=this;e.resolve(n).then(function(e){if(e.stream_url){var n=e.stream_url+"?client_id="+t,o=e.artwork_url;a.audio.setAttribute("src",n),r.call(this,n,o)}else i("Playlist is not supported")}).catch(function(e){i(e)})}},n}(SC);!function(e,n,t){"use strict";function r(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),t=n.exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function i(n){y.search(n,function(n,r){e.show(l),e.hide(d),t.drawAlbumImg(r),setTimeout(p.toggle(h,"ctrgroup--hidden"),3e3)},function(n){403===n.status?e.query(".warnPanel__p").innerHTML="This song is not supported":e.query(".warnPanel__p").innerHTML=n,e.show(d)})}var a=function(){var e=window.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);if(e.indexOf("Trident/")>0){var t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}();a&&a<12&&(e.query(".layer").style.display="table");var o="track",u=e.query(".ctrgroup__player__form"),s=e.query(".ctrgroup__togglebtn"),c=e.query(".ctrgroup__player__form__input"),l=e.query(".visualPanel"),d=e.query(".warnPanel"),f=e.query(".defaultPanel"),h=e.query(".ctrgroup"),g=e.query(".ctrgroup__player__audio"),p=e.util,y=n(g);if(t.init({analyser:y.analyser,canvas:l}),p.toggle(h,"ctrgroup--hidden"),e.hide(l),r(o)){var w=r(o);c.value=w,i(w),g.play()}u.addEventListener("submit",function(n){n.preventDefault(),e.hide(f),p.isCorrectSoundCloudURL(c.value)?(i(c.value),g.play()):(e.query(".warnPanel__p").innerHTML="invalid soundcloud url",e.show(d))}),s.addEventListener("click",function(e){e.preventDefault(),p.toggle(h,"ctrgroup--hidden")}),g.addEventListener("ended",function(){e.show(l),t.clearBackEffect()}),window.addEventListener("keydown",function(e){32===e.which&&(g.paused?g.play():g.pause())})}(dom,sound,sona);